<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #canvas {
        border: 1px solid black;
      }
    </style>
  </head>

  <body>
    <canvas id="canvas" width="1000" height="500"></canvas>
  </body>
  <script>
    let grillY = [0, 50, 100, 150, 200, 250, 300, 350, 400, 450];
    let grillX = [
      0,
      50,
      100,
      150,
      200,
      250,
      300,
      350,
      400,
      450,
      500,
      550,
      600,
      650,
      700,
      750,
      800,
      850,
      900,
      950,
    ];

    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    let savePositionAfterObstacle = [];

    const drawGrille = () => {
      ctx.strokeRect(0, 0, 50, 50);
      let left = 0;
      let tops = 0;
      for (let index = 0; index < 200; index++) {
        ctx.strokeRect(left, tops, 50, 50);
        left = left + 50;
        if (left == 1000) {
          left = 0;
          tops = tops + 50;
        }
      }
    };
    let savePositionObstacleX = [];
    let savePositionObstacleY = [];
    const drawObstacle = () => {
      ctx.fillRect(0, 0, 50, 50);
      for (let index = 0; index < 40; index++) {
        let leftObstacle = 0;
        let topObstacle = 0;

        leftObstacle = grillX[Math.floor(Math.random() * grillX.length)];
        topObstacle = grillY[Math.floor(Math.random() * grillY.length)];
        savePositionAfterObstacle.push({
          leftObstacle,
          topObstacle,
        });
        savePositionObstacleX.push(leftObstacle);
        savePositionObstacleY.push(topObstacle);
        ctx.fillRect(leftObstacle, topObstacle, 50, 50);
      }
    };
    drawGrille();
    drawObstacle();
    console.log(savePositionObstacleX);
    console.log(savePositionObstacleY);
    console.log(savePositionAfterObstacle);

    let savePositionPlayer = [];
    savePositionAfterObstacle.forEach((save) => {
      let i = 0;
      leftObstacle = grillX[Math.floor(Math.random() * grillX.length)];
      topObstacle = grillY[Math.floor(Math.random() * grillY.length)];
      if (
        save.leftObstacle != leftObstacle &&
        save.topObstacle != topObstacle
      ) {
        savePositionPlayer.push({
          leftObstacle,
          topObstacle,
        });
      } else {
        leftObstacle = grillX[Math.floor(Math.random() * grillX.length)];
        topObstacle = grillY[Math.floor(Math.random() * grillY.length)];
      }
    });
    console.log(savePositionPlayer);

    let player1Position =
      savePositionPlayer[Math.floor(Math.random() * savePositionPlayer.length)];
    console.log(player1Position);
    ctx.fillStyle = 'rgb(200, 0, 0)';

    ctx.fillRect(
      player1Position.leftObstacle,
      player1Position.topObstacle,
      50,
      50
    );
    const drawMoveleft = () => {
      let moveLeft = player1Position.leftObstacle;

      for (let index = 0; index < 3; index++) {
        moveLeft = moveLeft - 50;
        if (moveLeft <= 0) {
          moveLeft = 0;
        }
      }
      console.log(moveLeft);

      const saveLeftSize = player1Position.leftObstacle - moveLeft;
      ctx.fillStyle = 'rgb(250, 250, 0)';
      ctx.fillRect(moveLeft, player1Position.topObstacle, saveLeftSize, 50);
    };
    const drawMoveRight = () => {
      let moveRight = player1Position.leftObstacle;

      for (let index = 0; index < 3; index++) {
        moveRight = moveRight + 50;
        if (moveRight >= 1000) {
          moveRight = 1000;
        }
      }
      console.log(moveRight);

      const saveRightSize = () => {
        if (moveRight == 1000) {
          return player1Position.leftObstacle - moveRight + 50;
        } else {
          return player1Position.leftObstacle - moveRight + 50;
        }
      };
      const positionRight = () => {
        if (moveRight <= 950) {
          return (moveRight = moveRight + 50);
        } else {
          return moveRight;
        }
      };
      ctx.fillStyle = 'rgb(250, 250, 0)';
      ctx.fillRect(
        positionRight(),
        player1Position.topObstacle,
        saveRightSize(),
        50
      );
    };
    const drawMoveTop = () => {
      let moveTop = player1Position.topObstacle;

      for (let index = 0; index < 3; index++) {
        moveTop = moveTop - 50;
        if (moveTop <= 0) {
          moveTop = 0;
        }
      }
      console.log(moveTop);

      const saveLeftSize = player1Position.topObstacle - moveTop;
      ctx.fillStyle = 'rgb(250, 250, 0)';
      ctx.fillRect(player1Position.leftObstacle, moveTop, 50, saveLeftSize);
    };
    const drawMoveBottom = () => {
      let moveBottom = player1Position.topObstacle;

      for (let index = 0; index < 3; index++) {
        moveBottom = moveBottom + 50;
        if (moveBottom >= 500) {
          moveBottom = 500;
        }
      }
      console.log(moveBottom);

      const saveRightSize = () => {
        if (moveBottom == 500) {
          return player1Position.topObstacle - moveBottom + 50;
        } else {
          return player1Position.topObstacle - moveBottom + 50;
        }
      };
      const positionRight = () => {
        if (moveBottom <= 450) {
          return (moveBottom = moveBottom + 50);
        } else {
          return moveBottom;
        }
      };
      ctx.fillStyle = 'rgb(250, 250, 0)';
      ctx.fillRect(
        player1Position.leftObstacle,
        positionRight(),
        50,
        saveRightSize()
      );
    };
    drawMoveleft();
    drawMoveRight();
    drawMoveTop();
    drawMoveBottom();
  </script>
</html>
