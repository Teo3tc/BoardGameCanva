<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>#canvas {
        border: 1px solid black;
      }</style>
  </head>

  <body>
    <canvas id="canvas" width="1000" height="500"></canvas>
  </body>
  <script>var grillY = [0, 50, 100, 150, 200, 250, 300, 350, 400, 450];
var grillX = [0, 50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950];
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var savePositionAfterObstacle = [];

var drawGrille = function drawGrille() {
  ctx.strokeRect(0, 0, 50, 50);
  var left = 0;
  var tops = 0;

  for (var index = 0; index < 200; index++) {
    ctx.strokeRect(left, tops, 50, 50);
    left = left + 50;

    if (left == 1000) {
      left = 0;
      tops = tops + 50;
    }
  }
};

var savePositionObstacleX = [];
var savePositionObstacleY = [];

var drawObstacle = function drawObstacle() {
  ctx.fillRect(0, 0, 50, 50);

  for (var index = 0; index < 40; index++) {
    var _leftObstacle = 0;
    var _topObstacle = 0;
    _leftObstacle = grillX[Math.floor(Math.random() * grillX.length)];
    _topObstacle = grillY[Math.floor(Math.random() * grillY.length)];
    savePositionAfterObstacle.push({
      leftObstacle: _leftObstacle,
      topObstacle: _topObstacle
    });
    savePositionObstacleX.push(_leftObstacle);
    savePositionObstacleY.push(_topObstacle);
    ctx.fillRect(_leftObstacle, _topObstacle, 50, 50);
  }
};

drawGrille();
drawObstacle();
console.log(savePositionObstacleX);
console.log(savePositionObstacleY);
console.log(savePositionAfterObstacle);
var savePositionPlayer = [];
savePositionAfterObstacle.forEach(function (save) {
  var i = 0;
  leftObstacle = grillX[Math.floor(Math.random() * grillX.length)];
  topObstacle = grillY[Math.floor(Math.random() * grillY.length)];

  if (save.leftObstacle != leftObstacle && save.topObstacle != topObstacle) {
    savePositionPlayer.push({
      leftObstacle: leftObstacle,
      topObstacle: topObstacle
    });
  } else {
    leftObstacle = grillX[Math.floor(Math.random() * grillX.length)];
    topObstacle = grillY[Math.floor(Math.random() * grillY.length)];
  }
});
console.log(savePositionPlayer);
var player1Position = savePositionPlayer[Math.floor(Math.random() * savePositionPlayer.length)];
console.log(player1Position);
ctx.fillStyle = 'rgb(200, 0, 0)';
ctx.fillRect(player1Position.leftObstacle, player1Position.topObstacle, 50, 50);

var drawMoveleft = function drawMoveleft() {
  var moveLeft = player1Position.leftObstacle;

  for (var index = 0; index < 3; index++) {
    moveLeft = moveLeft - 50;

    if (moveLeft <= 0) {
      moveLeft = 0;
    }
  }

  console.log(moveLeft);
  var saveLeftSize = player1Position.leftObstacle - moveLeft;
  ctx.fillStyle = 'rgb(250, 250, 0)';
  ctx.fillRect(moveLeft, player1Position.topObstacle, saveLeftSize, 50);
};

var drawMoveRight = function drawMoveRight() {
  var moveRight = player1Position.leftObstacle;

  for (var index = 0; index < 3; index++) {
    moveRight = moveRight + 50;

    if (moveRight >= 1000) {
      moveRight = 1000;
    }
  }

  console.log(moveRight);

  var saveRightSize = function saveRightSize() {
    if (moveRight == 1000) {
      return player1Position.leftObstacle - moveRight + 50;
    } else {
      return player1Position.leftObstacle - moveRight + 50;
    }
  };

  var positionRight = function positionRight() {
    if (moveRight <= 950) {
      return moveRight = moveRight + 50;
    } else {
      return moveRight;
    }
  };

  ctx.fillStyle = 'rgb(250, 250, 0)';
  ctx.fillRect(positionRight(), player1Position.topObstacle, saveRightSize(), 50);
};

var drawMoveTop = function drawMoveTop() {
  var moveTop = player1Position.topObstacle;

  for (var index = 0; index < 3; index++) {
    moveTop = moveTop - 50;

    if (moveTop <= 0) {
      moveTop = 0;
    }
  }

  console.log(moveTop);
  var saveLeftSize = player1Position.topObstacle - moveTop;
  ctx.fillStyle = 'rgb(250, 250, 0)';
  ctx.fillRect(player1Position.leftObstacle, moveTop, 50, saveLeftSize);
};

var drawMoveBottom = function drawMoveBottom() {
  var moveBottom = player1Position.topObstacle;

  for (var index = 0; index < 3; index++) {
    moveBottom = moveBottom + 50;

    if (moveBottom >= 500) {
      moveBottom = 500;
    }
  }

  console.log(moveBottom);

  var saveRightSize = function saveRightSize() {
    if (moveBottom == 500) {
      return player1Position.topObstacle - moveBottom + 50;
    } else {
      return player1Position.topObstacle - moveBottom + 50;
    }
  };

  var positionRight = function positionRight() {
    if (moveBottom <= 450) {
      return moveBottom = moveBottom + 50;
    } else {
      return moveBottom;
    }
  };

  ctx.fillStyle = 'rgb(250, 250, 0)';
  ctx.fillRect(player1Position.leftObstacle, positionRight(), 50, saveRightSize());
};

drawMoveleft();
drawMoveRight();
drawMoveTop();
drawMoveBottom();</script>
</html>
